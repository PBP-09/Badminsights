{% extends 'base.html' %}
{% block title %}{% if product %}Edit Produk{% else %}Tambah Produk{% endif %}{% endblock %}
{% block content %}
<div class="mb-4"><a href="{% url 'katalog:product_list' %}" class="text-secondary">← Kembali</a></div>
<h1 class="text-2xl font-serif mb-4">{% if product %}Edit Produk{% else %}Tambah Produk{% endif %}</h1>
<form method="post" class="grid md:grid-cols-2 gap-4 bg-surface p-4 rounded shadow">
  {% csrf_token %}
  <label class="block">
    <span class="text-sm">Nama</span>
    <input name="name" value="{{ product.name|default:'' }}" required class="w-full border rounded px-3 py-2" />
  </label>
  <label class="block">
    <span class="text-sm">Kategori</span>
    <select name="category" required class="w-full border rounded px-3 py-2">
      {% for val,label in categories %}
      <option value="{{ val }}" {% if product and product.category == val %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </label>
  <label class="block">
    <span class="text-sm">Harga</span>
    <input type="number" step="0.01" name="price" value="{{ product.price|default:0 }}" required class="w-full border rounded px-3 py-2" />
  </label>
  <label class="block">
    <span class="text-sm">Stok</span>
    <input type="number" name="stock" value="{{ product.stock|default:0 }}" required class="w-full border rounded px-3 py-2" />
  </label>
  <label class="block md:col-span-2">
    <span class="text-sm">URL Gambar</span>
    <input name="image_url" value="{{ product.image_url|default:'' }}" class="w-full border rounded px-3 py-2" />
  </label>
  <label class="block md:col-span-2">
    <span class="text-sm">Deskripsi</span>
    <textarea name="description" rows="5" class="w-full border rounded px-3 py-2">{{ product.description|default:'' }}</textarea>
  </label>
  <label class="block md:col-span-2">
  <span class="text-sm">Rating (0–5)</span>
  <input type="number" step="0.1" min="0" max="5" name="rating" value="{{ product.rating|default:0 }}" class="w-full border rounded px-3 py-2" />
  </label>
  <div class="md:col-span-2">
    <button class="px-4 py-2 bg-primary text-white rounded">Simpan</button>
  </div>
</form>
{% endblock %}
